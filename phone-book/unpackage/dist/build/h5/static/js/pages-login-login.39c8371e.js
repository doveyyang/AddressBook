(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"1b3c":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(i("b684")),n=i("2f62"),a=r(i("e33b"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},o=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(e){c(t,e,i[e])})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l={components:{mInput:a.default},data:function(){return{providerList:[],hasProvider:!1,account:"110",password:"123456",positionTop:0}},computed:(0,n.mapState)(["forcedLogin","hasLogin","userName","info"]),methods:s({},(0,n.mapMutations)(["login"]),{initProvider:function(){var t=this,e=["weixin","qq","sinaweibo"];uni.getProvider({service:"oauth",success:function(i){if(i.provider&&i.provider.length){for(var o=0;o<i.provider.length;o++)~e.indexOf(i.provider[o])&&t.providerList.push({value:i.provider[o],image:"../../static/img/"+i.provider[o]+".png"});t.hasProvider=!0}},fail:function(t){console.error("获取服务供应商失败："+JSON.stringify(t))}})},initPosition:function(){this.positionTop=uni.getSystemInfoSync().windowHeight-100},bindLogin:function(){var t=this,e=this;if(this.account.length<3)uni.showToast({icon:"none",title:"账号最短为 5 个字符"});else if(this.password.length<6)uni.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var i={account:this.account,password:this.password};uni.request({url:"".concat(o.default.BASEURL,"/User/login"),data:i,method:"POST",header:{"content-type":"application/json"},success:function(n){if(console.log(n.data),n.data&&200!=n.data.code)uni.showToast({title:n.data.msg,icon:"none"});else{o.default.addUser(i);var a=o.default.getUsers().some(function(t){return i.account===t.account&&i.password===t.password});a?(t.$store.dispatch("SetInfo",JSON.stringify(n.data.datas)),t.$store.dispatch("setPwd",e.password),t.toMain(t.account)):uni.showToast({icon:"none",title:"用户账号或密码不正确"})}},fail:function(t){console.log("fail",t)}})}},oauth:function(t){var e=this;uni.login({provider:t,success:function(i){uni.getUserInfo({provider:t,success:function(t){e.toMain(t.userInfo.nickName)}})},fail:function(t){console.error("授权登录失败："+JSON.stringify(t))}})},toMain:function(t){this.login(t),this.forcedLogin,uni.reLaunch({url:"../main/main"})}}),onReady:function(){}};e.default=l},"48fc":function(t,e,i){"use strict";var o=i("a893"),n=i.n(o);n.a},"951c":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'body[data-v-337e9860],uni-page-body[data-v-337e9860]{min-height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}\n\t\n\t\n\t\n\t/* 原生组件模式下需要注意组件外部样式 */m-input[data-v-337e9860]{width:100%;min-height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.content[data-v-337e9860]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background-color:#efeff4;padding:%?20?%}.input-group[data-v-337e9860]{background-color:#fff;margin-top:%?40?%;position:relative}.input-group[data-v-337e9860]:before{position:absolute;right:0;top:0;left:0;height:%?1?%;content:"";-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}.input-group[data-v-337e9860]:after{position:absolute;right:0;bottom:0;left:0;height:%?1?%;content:"";-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}.input-row[data-v-337e9860]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;position:relative}.input-row .title[data-v-337e9860]{width:20%;height:%?50?%;min-height:%?50?%;padding:%?15?% 0;padding-left:%?30?%;line-height:%?50?%}.input-row.border[data-v-337e9860]:after{position:absolute;right:0;bottom:0;left:%?15?%;height:%?1?%;content:"";-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);background-color:#c8c7cc}.btn-row[data-v-337e9860]{margin-top:%?50?%;padding:%?20?%}uni-button.primary[data-v-337e9860]{background-color:#0faeff}.action-row[data-v-337e9860]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.action-row uni-navigator[data-v-337e9860]{color:#007aff;padding:0 %?20?%}.oauth-row[data-v-337e9860]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;width:100%}.oauth-image[data-v-337e9860]{width:%?100?%;height:%?100?%;border:%?1?% solid #ddd;border-radius:%?100?%;margin:0 %?40?%;background-color:#fff}.oauth-image uni-image[data-v-337e9860]{width:%?60?%;height:%?60?%;margin:%?20?%}',""])},"978d":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"input-group"},[i("v-uni-view",{staticClass:"input-row border"},[i("v-uni-text",{staticClass:"title"},[t._v("账号：")]),i("m-input",{staticClass:"m-input",attrs:{type:"text",clearable:"",focus:"",placeholder:"请输入账号"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),i("v-uni-view",{staticClass:"input-row"},[i("v-uni-text",{staticClass:"title"},[t._v("密码：")]),i("m-input",{attrs:{type:"password",displayable:"",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),i("v-uni-view",{staticClass:"btn-row"},[i("v-uni-button",{staticClass:"primary",attrs:{type:"primary"},on:{click:function(e){e=t.$handleEvent(e),t.bindLogin(e)}}},[t._v("登录")])],1),i("v-uni-view",{staticClass:"action-row"},[i("v-uni-navigator",{attrs:{url:"../reg/reg"}},[t._v("注册账号")]),i("v-uni-text",[t._v("|")]),i("v-uni-navigator",{attrs:{url:"../pwd/pwd"}},[t._v("忘记密码")])],1)],1)},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},a893:function(t,e,i){var o=i("951c");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("4ab56933",o,!0,{sourceMap:!1,shadowMode:!1})},bcc2:function(t,e,i){"use strict";i.r(e);var o=i("1b3c"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);e["default"]=n.a},f805:function(t,e,i){"use strict";i.r(e);var o=i("978d"),n=i("bcc2");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("48fc");var r=i("2877"),s=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,"337e9860",null);e["default"]=s.exports}}]);