(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-edituser-edituser"],{3736:function(t,a,e){a=t.exports=e("2350")(!1),a.push([t.i,".btn-row[data-v-db5925ac]{padding:%?20?%}.btn-row uni-button[data-v-db5925ac]{margin:%?10?%}uni-input[data-v-db5925ac]{text-align:right;color:#999}",""])},"4f07":function(t,a,e){"use strict";var n=e("a4ff"),i=e.n(n);i.a},"506a":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",[e("v-uni-form",[e("v-uni-view",{staticClass:"cu-form-group margin-top"},[e("v-uni-view",{staticClass:"title"},[t._v("我的昵称")]),e("v-uni-input",{attrs:{placeholder:"请填写姓名",name:"input"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}})],1),e("v-uni-view",{staticClass:"cu-bar bg-white margin-top"},[e("v-uni-view",{staticClass:"action"},[t._v("我的头像")]),e("v-uni-view",{staticClass:"action"},[t._v(t._s(t.imgList.length)+"/1")])],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.imgList,function(a,n){return e("v-uni-view",{key:n,staticClass:"padding-xs bg-img",style:[{backgroundImage:"url("+t.imgList[n]+")"}],attrs:{"data-url":t.imgList[n]},on:{click:function(a){a=t.$handleEvent(a),t.ViewImage(a)}}},[e("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":n},on:{click:function(a){a.stopPropagation(),a=t.$handleEvent(a),t.DelImg(a)}}},[e("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)}),t.imgList.length<1?e("v-uni-view",{staticClass:"padding-xs solids",on:{click:function(a){a=t.$handleEvent(a),t.ChooseImage(a)}}},[e("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2)],1),e("v-uni-view",{staticClass:"btn-row"},[e("v-uni-button",{attrs:{type:"primary",plain:""},on:{click:function(a){a=t.$handleEvent(a),t.submit(a)}}},[t._v("提交修改")])],1)],1)],1)},i=[];e.d(a,"a",function(){return n}),e.d(a,"b",function(){return i})},"5b23":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("2f62"),i=s(e("b684"));function s(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{index:-1,date:(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),imgList:[],modalName:null,textareaAValue:"",textareaBValue:"",Id:"",name:"",phone:"",company:"",position:"",headUrl:"",email:"",sort:"10"}},onLoad:function(t){this.hasLogin||uni.reLaunch({url:"../main/main"}),this.initdata()},computed:(0,n.mapState)(["forcedLogin","hasLogin","userName","info","password"]),methods:{initdata:function(){var t=this;if(this.hasLogin){var a=JSON.parse(this.info),e={};e.password=this.password,e.id=a.id,e.account=a.account,e.token=a.token,uni.showLoading({}),uni.request({url:"".concat(i.default.BASEURL,"/User/My"),data:e,method:"POST",header:{"content-type":"application/json"},success:function(a){if(a.data&&200!=a.data.code)uni.showToast({title:a.data.msg,icon:"none"});else{var e=a.data.data;t.name=e.nickname,t.headUrl=e.head_img,e.head_img&&t.imgList.push(i.default.BASEIMGURL+e.head_img)}},complete:function(){uni.hideLoading()}})}},submit:function(){if(this.hasLogin){var t=JSON.parse(this.info),a={};a.password=this.password,a.id=t.id,a.account=t.account,a.token=t.token,a.nickname=this.name,a.head_img=this.headUrl,uni.request({url:"".concat(i.default.BASEURL,"/User/edituserinfo"),data:a,method:"POST",header:{"content-type":"application/json"},success:function(t){t.data&&200!=t.data.code?uni.showToast({title:t.data.msg,icon:"none"}):uni.showToast({title:t.data.msg,success:function(){uni.navigateBack({delta:1})}})}})}},deleUser:function(){if(this.hasLogin){var t=JSON.parse(this.info),a={};a.password=this.password,a.id=t.id,a.account=t.account,a.token=t.token,a.bid=this.Id,uni.request({url:"".concat(i.default.BASEURL,"/Addressbook/delbook"),data:a,method:"POST",header:{"content-type":"application/json"},success:function(t){t.data&&200!=t.data.code?uni.showToast({title:t.data.msg,icon:"none"}):uni.showToast({title:t.data.msg,success:function(){uni.showToast({title:t.data.msg,icon:"none",complete:function(){uni.navigateBack({delta:1})}})}})}})}},PickerChange:function(t){this.index=t.detail.value},DateChange:function(t){this.date=t.detail.value},ChooseImage:function(){var t=this;uni.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(a){var e=a.tempFilePaths;uni.uploadFile({url:"".concat(i.default.BASEURL,"/User/upload"),filePath:e[0],name:"file",success:function(e){e.data=JSON.parse(e.data),1==e.data.status&&(t.headUrl=e.data.info,0!=t.imgList.length?t.imgList=t.imgList.concat(a.tempFilePaths):t.imgList=a.tempFilePaths,uni.showToast({title:"上传成功",icon:"none"}))}})}})},ViewImage:function(t){uni.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){var a=this;uni.showModal({title:"提示",content:"确定要删除图片吗？",cancelText:"返回",confirmText:"删掉",success:function(e){e.confirm&&a.imgList.splice(t.currentTarget.dataset.index,1)}})}}};a.default=o},8469:function(t,a,e){"use strict";e.r(a);var n=e("506a"),i=e("ecf3");for(var s in i)"default"!==s&&function(t){e.d(a,t,function(){return i[t]})}(s);e("4f07");var o=e("2877"),u=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"db5925ac",null);a["default"]=u.exports},a4ff:function(t,a,e){var n=e("3736");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("40e9eecb",n,!0,{sourceMap:!1,shadowMode:!1})},b684:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n="USERS_KEY",i="//addressbook.jingru88.com/api",s="http://addressbook.jingru88.com/uploads/images/",o=function(){var t="";return t=uni.getStorageSync(n),t||(t="[]"),JSON.parse(t)},u=function(t){var a=o();a.push({account:t.account,password:t.password}),uni.setStorageSync(n,JSON.stringify(a))},c={getUsers:o,addUser:u,BASEURL:i,BASEIMGURL:s};a.default=c},ecf3:function(t,a,e){"use strict";e.r(a);var n=e("5b23"),i=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(a,t,function(){return n[t]})}(s);a["default"]=i.a}}]);